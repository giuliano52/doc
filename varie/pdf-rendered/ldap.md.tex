\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
    \usepackage{xltxtra,xunicode}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Mapping=tex-text,Scale=MatchLowercase}
  \newcommand{\euro}{â‚¬}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{\usepackage{microtype}}{}
\usepackage[top=1cm, bottom=1.5cm, left=1cm, right=1cm]{geometry}
\ifxetex
  \usepackage[setpagesize=false, % page size defined by xetex
              unicode=false, % unicode breaks when used with xetex
              xetex]{hyperref}
\else
  \usepackage[unicode=true]{hyperref}
\fi
\hypersetup{breaklinks=true,
            bookmarks=true,
            pdfauthor={Giuliano Dedda},
            pdftitle={LDAP},
            colorlinks=true,
            citecolor=blue,
            urlcolor=blue,
            linkcolor=magenta,
            pdfborder={0 0 0}}
\urlstyle{same}  % don't use monospace font for urls
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\setcounter{secnumdepth}{0}

\title{LDAP}
\author{Giuliano Dedda}
\date{15/07/2014}

\begin{document}
\maketitle

\section{Ldapsearch}\label{ldapsearch}

\begin{verbatim}
ldapsearch -x -b dc=zumba,dc=local
            -x : Simple authentication
            -b : base dn for search
            -D : Bind DN
            -h : server
\end{verbatim}

Per ricercare l'untente \emph{aaaaa} sul server \emph{server-ldap} con
facendo bind con l'utente \emph{bbbbb} e \emph{password\_segreta}

\begin{verbatim}
ldapsearch -x -h server-ldap -D "CN=bbbbb,OU=amministrativa,DC=corp,DC=zumba,DC=local" -o ldif-wrap=no -b "DC=corp,DC=zumba,DC=local" -w password_segreta -LLL "(&(objectClass=User)(sn=aaaaa))" cn sAMAccountName 
\end{verbatim}

\section{Filtri LDAP}\label{filtri-ldap}

Windows Account = ciccio

\begin{verbatim}
(&(objectClass=User)(sAMAccountName=ciccio))
\end{verbatim}

Account Never Expire

\begin{verbatim}
(&(objectClass=User)(userAccountControl:1.2.840.113556.1.4.803:=65536)) 
\end{verbatim}

trova gli account con cognome uguale a Pluto

\begin{verbatim}
 (&(objectClass=User)(sn=Pluto))
 
\end{verbatim}

trova gli account con name uguale a papero\\
(\&(objectClass=User)(name=papero*))

Gruppi con membro il CN indicato

\begin{verbatim}
(&(objectClass=group)(member=CN=S-1-5-21-194 ... 6961-546487652-86 ... 15-32915,CN=ForeignSecurityPrincipals,DC=corp,DC=zumba,DC=local))
\end{verbatim}

Con un lastlogon maggiore di una data

\begin{verbatim}
(&(objectClass=User)(lastlogon >= 126769842140239368))
\end{verbatim}

\end{document}
